var irsz_selector="img",
    irsz_min_height=400,
    irsz_min_width=400,
    irsz_auto=true,
    irsz_padding=[10,10];

(function(){$(document).ready(function(){$(irsz_selector).load(function(){if(irsz_auto){a(this,true)}});$(window).resize(function(){if(irsz_auto){$(irsz_selector).each(function(d,f){a(f,false)})}});$(irsz_selector).each(function(d,f){$(f).click(function(){b(this,true);return false})})});function b(e,d){$("<img/>").attr("src",$(e).attr("src")).load(function(){var f=this.width,g=this.height;if($(e).width()<f||$(e).height<g){c(e,f,g,d)}else{a(e,d)}})}function a(e,d){$("<img/>").attr("src",$(e).attr("src")).load(function(){var n=this.width,j=this.height,k=Math.max(this.width/this.height,this.height/this.width),m=$(window).width()-irsz_padding[0],r=$(window).height()-irsz_padding[1],f=0,h=0,p,g,o,q;if(j<irsz_min_height){return}if(n<irsz_min_width){return}function l(s){return Math.round(n*s/j)}function i(s){return Math.round(j*s/n)}if(k>2){if(n<j){h=m>irsz_min_width?m:irsz_min_width;f=i(h)}else{f=r>irsz_min_height?r:irsz_min_height;h=l(f)}}else{p=m>irsz_min_width?m:irsz_min_width;g=i(p);q=r>irsz_min_height?r:irsz_min_height;o=l(q);p=p<n?p:n;g=g<j?g:j;o=o<n?o:n;q=q<j?q:j;if(g>q){h=o;f=q}else{h=p;f=g}}if(f!=$(e).height()&&f<=j){c(e,h,f,d)}})}function c(g,e,f,d){if(d){$(g).animate({width:e+"px",height:f+"px"},1500)}else{g.style.height=f+"px";g.style.width=e+"px"}}})();